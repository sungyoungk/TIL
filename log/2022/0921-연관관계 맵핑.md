# ë‹¨ë°©í–¥ ì—°ê´€ê´€ê³„

## ê°ì²´ë¥´ë¥´ í…Œì´ë¸”ì— ë§ì¶”ì–´ ëª¨ë¸ë§ í•  ê²½ìš° ë¬¸ì œì 
- ì°¸ì¡° ëŒ€ì‹ ì— ì™¸ë˜í‚¤ë¥¼ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ëŠ” ë°©ë²•

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-09-21 á„‹á…©á„Œá…¥á†« 11 26 16](https://user-images.githubusercontent.com/101084642/191400426-3acf98bc-b7c0-4410-9d50-6146d143c204.png)

#### `ë¬¸ì œì `
- ì¡°íšŒì‹œ ì‹ë³„ìë¡œ ë‹¤ì‹œ ì¡°íšŒí•´ì•¼í•¨ìœ¼ë¡œ ê°ì²´ì§€í–¥ì  ë°©ë²•ì´ ì•„ë‹˜
- ë°ì´í„° ì¤‘ì‹¬ìœ¼ë¡œ ëª¨ë¸ë§ ë˜ì–´ ê°ì²´ì˜ í˜‘ë ¥ê´€ê³„ë¥¼ ë§Œë“¤ ìˆ˜ ì—†ë‹¤
- **ğŸ’¡ í…Œì´ë¸”ì€ ì™¸ë˜ í‚¤ë¡œ ì¡°ì¸ì„ ì‚¬ìš©í•´ì„œ ì—°ê´€ê´€ê³„ë¥¼ ì°¾ëŠ”ë‹¤**
- **ğŸ’¡ê°ì²´ëŠ” ì°¸ì¡°ë¥¼ ì‚¬ìš©í•´ì„œ ì—°ê´€ê´€ê³„ë¥¼ ì°¾ëŠ”ë‹¤**

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-09-21 á„‹á…©á„Œá…¥á†« 11 26 55](https://user-images.githubusercontent.com/101084642/191400508-ce9e5bf9-74c9-4f57-8f84-e337c9165d44.png)

<br>

## ë‹¨ë°©í–¥ ì—°ê´€ê´€ê³„(ê°ì²´ì§€í–¥)

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-09-21 á„‹á…©á„Œá…¥á†« 11 29 59](https://user-images.githubusercontent.com/101084642/191400868-86dd503a-8c83-4db8-93c9-fd4f0586c46a.png)

- ê°ì²´ë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ ëª¨ë¸ë§ì„ í•˜ë©´ **ì°¸ì¡°**ë¥¼ ì´ìš©í•˜ì—¬ ì—°ê´€ê´€ê³„ë¥¼ ì¡°íšŒí•œë‹¤
- í•˜ì§€ë§Œ, ì§€ê¸ˆì€ ë‹¨ë°©í–¥ ì—°ê´€ê´€ê³„ë¡œ ë©¤ë²„ëŠ” íŒ€ì„ ì¡°íšŒí•  ìˆ˜ ìˆì§€ë§Œ íŒ€ì€ ë©¤ë²„ ì¡°íšŒë¥¼ í•˜ì§€ ëª»í•œë‹¤

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-09-21 á„‹á…©á„Œá…¥á†« 11 30 42](https://user-images.githubusercontent.com/101084642/191400953-844335e7-6ac1-4f3f-8265-cab621f6fa2e.png)

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-09-21 á„‹á…©á„Œá…¥á†« 11 31 27](https://user-images.githubusercontent.com/101084642/191401016-62e79035-7778-4c48-bae6-9fe0d5ecb2b2.png)

<br>

## ì–‘ë°©í–¥ ë§¤í•‘ê³¼ ì—°ê´€ê´€ê³„ ì£¼ì¸

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-09-21 á„‹á…©á„Œá…¥á†« 11 33 54](https://user-images.githubusercontent.com/101084642/191401351-bf180d3f-a602-45ce-b258-6e8f903fd3eb.png)

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-09-21 á„‹á…©á„Œá…¥á†« 11 34 21](https://user-images.githubusercontent.com/101084642/191401397-a43c260d-4ea0-48a5-85ca-4dfd27345090.png)

- íŒ€ ì—”í‹°í‹°ì— ì»¬ë ‰ì…˜ì„ ì¶”ê°€í•¨

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-09-21 á„‹á…©á„Œá…¥á†« 11 34 34](https://user-images.githubusercontent.com/101084642/191401425-f3b84698-44ba-4723-92e4-312644100232.png)
- ë”°ë¼ì„œ, ë°˜ëŒ€ë°©í–¥ìœ¼ë¡œ ê°ì²´ ê·¸ë˜í”„ íƒìƒ‰ ê°€ëŠ¥
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-09-21 á„‹á…©á„Œá…¥á†« 11 35 01](https://user-images.githubusercontent.com/101084642/191401498-12a760af-68b2-478d-917b-89e0bb71ef0e.png)

<br>

## ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸

- ê°ì²´ì™€ í…Œì´ë¸”ì´ ì—°ê´€ê´€ê³„ë¥¼ ë§ºëŠ” ë°©ë²•ì€ ë‹¤ë¦„
- ì‚¬ì‹¤ìƒ í…Œì´ë¸”ì€ ì™¸ë˜í‚¤ í•˜ë‚˜ë¥¼ ë‘ê³  ì™”ë‹¤ ê°”ë‹¤ê°€ ê°€ëŠ¥í•¨

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-09-21 á„‹á…©á„Œá…¥á†« 11 43 34](https://user-images.githubusercontent.com/101084642/191402565-da5ab999-b698-408e-8eb8-53fb8761fa92.png)

```text
SELECT *
FROM MEMBER M
JOIN MEMBER M ON TEAM T.TEAM_ID = M.TEAMID

SELECT *
FROM TEAM T
JIN TEAM T ON M.TEAMID = T.TEAM_ID

```
- ê°ì²´ì˜ ê²½ìš° ì–‘ë°©í–¥ì€ ì‚¬ì‹¤ìƒ ë‹¨ë°©í–¥ì´ ì–‘ìª½ ë°©í–¥ìœ¼ë¡œ ë§µí•‘ì´ ë˜ì–´ìˆëŠ”ê²ƒì„
- ì´ë•Œ, ê°ì²´ì˜ ì£¼ì¸ì€ í…Œì´ë¸”ì—ì„œ ì™¸ë˜í‚¤ë¥¼ ê°€ì§€ê³  ìˆëŠ” ìª½ì´ ì„¤ê³„ìƒ ì¢‹ë‹¤
- ë§Œì•½ íŒ€ì„ ì£¼ì¸ìœ¼ë¡œ ì¡ìœ¼ë©´, íŒ€ì—ì„œ ë¬´ì—‡ì¸ê°€ ì¿¼ë¦¬ë¥¼ ë‚ ë¦¬ëŠ”ë° ë©¤ë²„ë¡œ ì¿¼ë¦¬ê°€ ë‚ ì•„ê°€ê³ ... ì„±ëŠ¥ìƒ ë¬¸ì œë„ ìˆë‹¤

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-09-21 á„‹á…©á„Œá…¥á†« 11 42 40](https://user-images.githubusercontent.com/101084642/191402428-c4ba60aa-cc46-4b16-8c56-d1a995241b34.png)


![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-09-21 á„‹á…©á„Œá…¥á†« 11 40 57](https://user-images.githubusercontent.com/101084642/191402241-8f05e983-6e00-488a-9df9-4045ad4e9344.png)


## ì—°ê´€ê´€ê³„ ì£¼ì¸(ì–‘ë°©í–¥ ë§µí•‘ì¼ë•Œ)
- ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ë§Œ ì™¸ë˜í‚¤ë¥¼ ê´€ë¦¬í•œë‹¤ ì¦‰, ë“±ë¡, ìˆ˜ì •ì´ ê°€ëŠ¥í•˜ë‹¤
- ë‚˜ë¨¸ì§€ í•œ ìª½ì€ ì¡°íšŒë§Œ ê°€ëŠ¥í•˜ë‹¤
- ì£¼ì¸ì€ mappedBy ì†ì„± ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤

- ì£¼ì¸ì€ ì™¸ë˜í‚¤ë¥¼ ê°€ì§€ê³  ìˆëŠ” ìª½ìœ¼ë¡œ, ì—¬ê¸°ì„œëŠ” Memberê°€ ì£¼ì¸ì„
- N:1 ê´€ê³„ì—ì„œ N ì´ ì£¼ì¸ì´ ëœë‹¤


### ğŸ’¡ ì£¼ì˜
- ë”°ë¼ì„œ ì£¼ì¸ì¸ Member ê°€ ì•„ë‹Œ TEAM ìœ¼ë¡œ ë“±ë¡, ìˆ˜ì • ë“±ì„ í•´ì„œëŠ” ì•ˆëœë‹¤

`Member`
``` java
package helloJpa;

import javax.persistence.*;
import java.time.LocalDate;
import java.time.LocalDateTime;
import java.util.Date;

@Entity
public class Member {
    @Id @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;

    @Column(name = "USERNAME")
    private String name;

//    @Column(name = "TEAM_ID")
//    private Long teamId;
    @ManyToOne
    @JoinColumn(name = "TEAM_ID")
    private Team team;


    public Team getTeam() {
        return team;
    }

    public void setTeam(Team team) {
        this.team = team;
    }

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

//    public Long getTeamId() {
//        return teamId;
//    }
//
//    public void setTeamId(Long teamId) {
//        this.teamId = teamId;
//    }
}
```


`Team`
```java

package helloJpa;

import javax.persistence.*;
import java.util.ArrayList;
import java.util.List;

@Entity
public class Team {
    @Id @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;

    private String name;

    @OneToMany(mappedBy = "team")
    private List<Member> members = new ArrayList<>();

    public List<Member> getMembers() {
        return members;
    }

    public void setMembers(List<Member> members) {
        this.members = members;
    }

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }
}

```

`jpa main`
```java
package helloJpa;

import javax.persistence.EntityManager;
import javax.persistence.EntityManagerFactory;
import javax.persistence.EntityTransaction;
import javax.persistence.Persistence;
import java.util.List;

public class JpaMain {
    public static void main(String[] args) {
        EntityManagerFactory emf = Persistence.createEntityManagerFactory("hello");

        EntityManager em = emf.createEntityManager();

        EntityTransaction tx = em.getTransaction();
        tx.begin();

        try{
        Team team = new Team();
        team.setName("TeamA");
        em.persist(team);

        Member member = new Member();
        member.setName("memberA");
        member.setTeam(team);
            em.persist(member);

            em.flush();
            em.clear();

            Member findMember = em.find(Member.class, member.getId());
            List<Member> findMembers = findMember.getTeam().getMembers();

            for(Member m : findMembers) {
                System.out.println("m = " + m.getName());
            }



            tx.commit();
        } catch (Exception e) {
            tx.rollback();
        } finally {
            em.close();
        }
        emf.close();
    }
}


```
